<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live Stream Overlay</title>
  <style>
    body, html {
      margin: 0; padding: 0;
      overflow: hidden;
      background: black;
      font-family: Arial, sans-serif;
      touch-action: manipulation;
    }
    #video {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      object-fit: cover;
      z-index: 1;
    }
    #comments {
      position: fixed;
      bottom: 80px;
      left: 10px;
      width: 90%;
      max-height: 50%;
      display: flex;
      flex-direction: column-reverse;
      overflow: hidden;
      z-index: 5;
    }
    .comment {
      background: rgba(0,0,0,0.45);
      padding: 6px 10px;
      margin-top: 5px;
      border-radius: 12px;
      color: white;
      font-size: 15px;
      max-width: 80%;
      animation: fadeIn 0.4s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #controls {
      position: fixed;
      bottom: 10px;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 20px;
      z-index: 10;
    }
    .btn {
      width: 55px; height: 55px;
      background: rgba(255,255,255,0.15);
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      backdrop-filter: blur(6px);
      font-size: 26px;
      color: white;
      border: 2px solid rgba(255,255,255,0.25);
    }
    #viewerCount {
      position: fixed;
      top: 15px; left: 15px;
      padding: 6px 12px;
      background: rgba(0,0,0,0.45);
      color: #fff;
      border-radius: 20px;
      font-size: 15px;
      z-index: 12;
    }
    #recordIndicator {
      position: fixed;
      top: 15px; right: 15px;
      padding: 6px 12px;
      background: red;
      color: #fff;
      border-radius: 20px;
      font-weight: bold;
      display: none;
      z-index: 12;
    }
  </style>
</head>
<body>
  <video id="video" autoplay playsinline></video>

  <div id="viewerCount">ğŸ‘ï¸ 50,000 watching</div>
  <div id="recordIndicator">ğŸ”´ LIVE</div>

  <div id="comments"></div>

  <div id="controls">
    <div class="btn" id="recordBtn">âºï¸</div>
    <div class="btn" id="switchBtn">ğŸ”„</div>
    <div class="btn" id="reactionBtn">â¤ï¸</div>
  </div>

  <script>
    const video = document.getElementById('video');
    const comments = document.getElementById('comments');
    const viewerCount = document.getElementById('viewerCount');
    const recordIndicator = document.getElementById('recordIndicator');

    let viewers = 50000;
    setInterval(() => {
      viewers += Math.floor(Math.random() * 150);
      viewerCount.textContent = `ğŸ‘ï¸ ${viewers.toLocaleString()} watching`;
    }, 2000);

    const names = ["Yousef", "Amin", "Hassan", "Omar", "Zaid", "Layth", "Sami", "Malek", "Adham", "Basil"];
    const usernames = ["@moon", "@desertlion", "@arablive", "@fastfalcon", "@goldenhour", "@nightstream", "@mirage", "@arabisun", "@windrider", "@starveins"];
    const arabicMessages = [
      "Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ø§Ù‹!", "Ù…Ù…ØªØ§Ø² ğŸ”¥", "Ø£Ø­Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø«", "ØµÙˆØª ÙˆØ§Ø¶Ø­ ğŸ‘Œ", "Ø§Ø³ØªÙ…Ø± ğŸ™", "Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡", "100Ùª", "Ù‡Ù‡Ù‡Ù‡Ù‡Ù‡ ğŸ˜‚", "Ø¬Ù…ÙŠÙ„ Ø¬Ø¯Ø§Ù‹â¤ï¸"
    ];

    function addComment() {
      const c = document.createElement('div');
      c.className = 'comment';
      let name = names[Math.floor(Math.random()*names.length)];
      let user = usernames[Math.floor(Math.random()*usernames.length)];
      let msg = arabicMessages[Math.floor(Math.random()*arabicMessages.length)];
      c.innerHTML = `<b>${name}</b> <span style='opacity:0.6'>${user}</span><br>${msg}`;
      comments.prepend(c);
      setTimeout(() => c.remove(), 7000);
    }
    setInterval(addComment, 2000);

    async function startCamera() {
      const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" }, audio: true });
      video.srcObject = stream;
      window.mainStream = stream;
    }
    startCamera();

    let mediaRecorder;
    let chunks = [];
    const recordBtn = document.getElementById('recordBtn');

    recordBtn.onclick = () => {
      if (!mediaRecorder || mediaRecorder.state === "inactive") {
        const stream = video.srcObject;
        mediaRecorder = new MediaRecorder(stream, { mimeType: 'video/mp4' });

        mediaRecorder.ondataavailable = e => chunks.push(e.data);
        mediaRecorder.onstop = e => {
          const blob = new Blob(chunks, { type: 'video/mp4' });
          chunks = [];
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'recording.mp4';
          a.click();
        };

        mediaRecorder.start();
        recordIndicator.style.display = 'block';
      } else {
        mediaRecorder.stop();
        recordIndicator.style.display = 'none';
      }
    };

    document.getElementById('switchBtn').onclick = async () => {
      const current = window.mainStream.getVideoTracks()[0];
      current.stop();
      const newStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: true });
      video.srcObject = newStream;
      window.mainStream = newStream;
    };

    document.getElementById('reactionBtn').onclick = () => addComment();
  </script>
</body>
</html>
