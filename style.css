const video = document.getElementById("video");
const canvas = document.getElementById("recordCanvas");
const ctx = canvas.getContext("2d");

const recButton = document.getElementById("recButton");
const switchCam = document.getElementById("switchCam");
const likeButton = document.getElementById("likeButton");
const liveBadge = document.getElementById("liveBadge");

let currentCam = "environment";
let isRecording = false;
let recorder;
let chunks = [];
let stream;

/* Comentarios */
const commentsBox = document.getElementById("comments");
const sampleComments = [
    "Ø±Ø§Ø¦Ø¯: Ø§Ø³ØªÙ…Ø±", "Ø³ÙŠÙ: Ø£Ø­Ø³Ù†Øª", "Ø¹Ù„ÙŠ: Ù…Ù…ØªØ§Ø²", "ÙƒØ±ÙŠÙ…: Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹",
    "ÙŠÙˆØ³Ù: Ø§Ø³ØªÙ…Ø±", "Ù…Ø±ÙˆØ§Ù†: Ù…Ù…ØªØ§Ø²", "Ù‡ÙŠØ«Ù…: Ø¬Ù…ÙŠÙ„ Ø¬Ø¯Ø§"
];
const emojis = ["ðŸ”¥", "ðŸ‘"];

/* Iniciar cÃ¡mara */
async function startCamera() {
    if (stream) stream.getTracks().forEach(t => t.stop());

    stream = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: currentCam },
        audio: true
    });

    video.srcObject = stream;
}

startCamera();

/* Dibujar en canvas */
function drawFrame() {
    if (!isRecording) return;

    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;

    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    /* DIBUJAR INTERFAZ EXACTA DEL STYLE.CSS */
    const scale = canvas.width / window.innerWidth;

    function drawIcon(imgId, x, y, w) {
        const img = document.getElementById(imgId);
        if (!img.complete) return;
        ctx.drawImage(img, x * scale, y * scale, w * scale, w * scale);
    }

    /* USER ICON */
    drawIcon("userIcon", 6, 6, 58);

    /* USERNAME */
    ctx.fillStyle = "white";
    ctx.font = `${19 * scale}px Arial`;
    ctx.fillText("KALAL_Y", 72 * scale, 35 * scale);

    /* EYE + VIEWERS */
    drawIcon("eyeIcon", 72, 48, 28);
    ctx.font = `${17 * scale}px Arial`;
    ctx.fillText(document.getElementById("viewersCount").innerText,
        106 * scale, 68 * scale);

    /* LIVE BADGE */
    if (liveBadge.style.opacity === "1" || liveBadge.classList.contains("blink")) {
        ctx.fillStyle = "#d22";
        ctx.fillRect(canvas.width - (160 * scale), 6 * scale, 150 * scale, 40 * scale);
        ctx.fillStyle = "white";
        ctx.font = `${18 * scale}px Arial bold`;
        ctx.fillText("LIVE STREAMING", canvas.width - (150 * scale), 33 * scale);
    }

    /
